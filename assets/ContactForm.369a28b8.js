import{d as b,u as k,c as V,o as d,a as u,b as o,t as x,e as h,w as _,v as N,m as F,f as R,F as U,r as B,g as M,h as f,n as A,i as O}from"./runtime-dom.esm-bundler.a0638ba9.js";function P(){return Math.floor(Math.random()*16777215).toString(16)}var I=(a,n)=>{const r=a.__vccOpts||a;for(const[e,l]of n)r[e]=l;return r};const z=b({props:{type:{default:"text"},label:null,value:null,error:{default:""},id:{default:P()}},emits:["update:value","update:error","blur","input"],setup(a,{expose:n,emit:r}){n();const e=a,l=k(),c=V({get:()=>e.value,set:v=>{r("update:value",v),r("update:error","")}}),t={props:e,attrs:l,emit:r,fieldValue:c};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),T=["for"],L=["placeholder"],j=["type","placeholder"],q=["value"];function Z(a,n,r,e,l,c){return d(),u(U,null,[o("label",{for:r.id,class:"form-control-label visually-hidden"},x(r.label),9,T),h(` 
    REGRESSION BUG in Chromium version 40+: 
    
    input[type=email] will not update its visual appearance
    when its value is trimmed. This is a known issue:
    https://bugs.chromium.org/p/chromium/issues/detail?id=423785
  
    For now we'll fall back on [type=text] for email inputs.
    Our custom email field validation overrides the browser
    default behavior anyway.
  `),r.type=="textarea"?_((d(),u("textarea",F({key:0,"onUpdate:modelValue":n[0]||(n[0]=t=>e.fieldValue=t)},e.attrs,{placeholder:r.label,class:[{"is-invalid":r.error.length>0},"form-control"],onBlur:n[1]||(n[1]=t=>e.emit("blur",t)),onInput:n[2]||(n[2]=t=>e.emit("input",t))}),null,16,L)),[[N,e.fieldValue,void 0,{trim:!0}]]):_((d(),u("input",F({key:1,"onUpdate:modelValue":n[3]||(n[3]=t=>e.fieldValue=t)},e.attrs,{type:r.type=="email"?"text":r.type,placeholder:r.label,class:[{"is-invalid":r.error.length>0},"form-control"],autocomplete:"off",onBlur:n[4]||(n[4]=t=>e.emit("blur",t)),onInput:n[5]||(n[5]=t=>e.emit("input",t))}),null,16,j)),[[R,e.fieldValue,void 0,{trim:!0}]]),h(` 
    An <input> reserves its space when empty. I use it as a
    validation label to prevent the form from suddenly resizing
    when error text appears.

    This is an important accessibility concern, especially for
    people who prefer reduced UI motion for medical reasons.
  `),o("input",{readonly:"",disabled:"",tabindex:"-1",class:"invalid-feedback form-control-plaintext p-0 mx-0 mt-0",value:r.error},null,8,q)],64)}var D=I(z,[["render",Z]]);const s={required:a=>`${a} is required.`,tooLong:(a,n)=>`${a} can't be longer than ${n} characters.`,tooShort:(a,n)=>`${a} must be at least ${n} characters long.`,badEmail:()=>"Please enter a valid email address."};function C(a){return a.name.value.length===0?(a.name.error=s.required("Name"),!1):a.name.value.length>a.name.maxlength?(a.name.error=s.tooLong("Name",a.name.maxlength),!1):!0}function S(a){return a.company.value.length>a.company.maxlength?(a.company.error=s.tooLong("Company name",a.company.maxlength),!1):!0}function w(a,n){const r=n?new RegExp(n):/^([a-zA-Z0-9_+-]+\.)*[a-zA-Z0-9_+-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z]+$/;return a.email.value.length===0?(a.email.error=s.required("Email address"),!1):a.email.value.length>a.email.maxlength?(a.email.error=s.tooLong("Email address",a.email.maxlength),!1):r.test(a.email.value)?!0:(a.email.error=s.badEmail(),!1)}function E(a){return a.messageContent.value.length<a.messageContent.minlength?(a.messageContent.error=s.tooShort("Message content",a.messageContent.minlength),!1):a.messageContent.value.length>a.messageContent.maxlength?(a.messageContent.error=s.tooLong("Message content",a.messageContent.maxlength),!1):!0}function G(a){const n=a.target;let r=n.value.replace(/\s/g," ").replace(/\s\s+/g," ").replace(/^\s+/g,"");n.value=r}function J(a){const n=a.target;let r=n.value.replace(/\s/g," ").replace(/\s\s+/g," ").replace(/^\s+/g,"");n.value=r}function H(a){const n=a.target;let r=n.value.replace(/\s/g,"");n.value=r}var i;(function(a){a.ReadyForInput="ready",a.SubmissionPending="pending",a.Success="success",a.Error="error"})(i||(i={}));const K=b({props:{target:null,origin:null,overrides:null},setup(a,{expose:n}){n();const r=a,e=B(i.ReadyForInput),l=M({name:{value:"",error:"",maxlength:r.overrides?.name?.maxlength??120},company:{value:"",error:"",maxlength:r.overrides?.company?.maxlength??180},email:{value:"",error:"",maxlength:r.overrides?.email?.maxlength??320},messageContent:{value:"",error:"",minlength:r.overrides?.messagecontent?.minlength??20,maxlength:r.overrides?.messagecontent?.maxlength??1e3}});async function c(){if(e.value=i.SubmissionPending,![C(l),S(l),w(l,r.overrides?.email?.regex),E(l)].every(m=>m)){e.value=i.ReadyForInput;return}const g={name:l.name.value,company:l.company.value,email:l.email.value,messageContent:l.messageContent.value};let y;try{y=await fetch(r.target,{method:"POST",headers:{"Access-Control-Allow-Origin":r.origin},credentials:"same-origin",body:JSON.stringify(g)})}catch(m){e.value=i.Error,console.warn(m);return}if(!y.ok){const m=await y.json();if(!m.hasOwnProperty("errors")){console.warn("Invalid response from server. Response body:"),console.warn(m),e.value=i.Error;return}t(m.errors),e.value=i.ReadyForInput;return}e.value=i.Success}function t(p){for(const g in p)l[g].error=p[g][0]}const v={props:r,formState:e,form:l,submitForm:c,displayServerValidationErrorsInForm:t,FormInput:D,validateName:C,validateCompany:S,validateEmail:w,validateMessageContent:E,cleanNameFieldInput:G,cleanCompanyFieldInput:J,cleanEmailFieldInput:H,FormState:i};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Q={key:0,class:"p-5 alert alert-success text-center"},W=o("h1",{class:"mx-auto mb-3"},"Message Sent",-1),X=o("span",null,"I'll reply to you via email as soon as I can.",-1),Y=o("br",null,null,-1),$=o("span",null,"Thanks for stopping by!",-1),ee=[W,X,Y,$],ne={key:1,class:"p-5 alert alert-warning text-center"},ae=o("h1",{class:"mx-auto mb-3"},"Error",-1),te=o("span",null,"Something went wrong on our end.",-1),re=o("br",null,null,-1),oe=o("span",null,"Please try again later.",-1),le=[ae,te,re,oe],ie=["disabled"],se={class:"row g-2"},me={class:"col-12"},de={class:"col-12"},ue={class:"col-12"},ce={class:"col-12"},ve={class:"col-12"},ge={key:0,class:"spinner-border spinner-border-sm",role:"status"};function fe(a,n,r,e,l,c){return e.formState===e.FormState.Success?(d(),u("div",Q,ee)):e.formState===e.FormState.Error?(d(),u("div",ne,le)):(d(),u("fieldset",{key:2,disabled:e.formState!==e.FormState.ReadyForInput},[o("div",se,[o("div",me,[f(e.FormInput,{type:"text",value:e.form.name.value,"onUpdate:value":n[0]||(n[0]=t=>e.form.name.value=t),error:e.form.name.error,"onUpdate:error":n[1]||(n[1]=t=>e.form.name.error=t),id:"contact-form-name",label:"Name",maxlength:e.form.name.maxlength,onBlur:n[2]||(n[2]=t=>e.validateName(e.form)),onInput:e.cleanNameFieldInput},null,8,["value","error","maxlength","onInput"])]),o("div",de,[f(e.FormInput,{label:"Company (optional)",type:"text",id:"contact-form-company",value:e.form.company.value,"onUpdate:value":n[3]||(n[3]=t=>e.form.company.value=t),error:e.form.company.error,"onUpdate:error":n[4]||(n[4]=t=>e.form.company.error=t),maxlength:e.form.company.maxlength,onBlur:n[5]||(n[5]=t=>e.validateCompany(e.form)),onInput:e.cleanCompanyFieldInput},null,8,["value","error","maxlength","onInput"])]),o("div",ue,[f(e.FormInput,{label:"Email",type:"email",id:"contact-form-email",value:e.form.email.value,"onUpdate:value":n[6]||(n[6]=t=>e.form.email.value=t),error:e.form.email.error,"onUpdate:error":n[7]||(n[7]=t=>e.form.email.error=t),maxlength:e.form.email.maxlength,onBlur:n[8]||(n[8]=t=>e.validateEmail(e.form)),onInput:e.cleanEmailFieldInput},null,8,["value","error","maxlength","onInput"])]),o("div",ce,[f(e.FormInput,{label:"Message",type:"textarea",id:"contact-form-messagecontent",value:e.form.messageContent.value,"onUpdate:value":n[9]||(n[9]=t=>e.form.messageContent.value=t),error:e.form.messageContent.error,"onUpdate:error":n[10]||(n[10]=t=>e.form.messageContent.error=t),minlength:e.form.messageContent.minlength,maxlength:e.form.messageContent.maxlength,rows:4,onBlur:n[11]||(n[11]=t=>e.validateMessageContent(e.form))},null,8,["value","error","minlength","maxlength"])]),o("div",ve,[o("button",{onClick:n[12]||(n[12]=t=>e.submitForm()),class:A([e.formState===e.FormState.ReadyForInput?"btn-primary":"btn-secondary","btn btn-lg w-100 mt-1"])},[e.formState!==e.FormState.ReadyForInput?(d(),u("div",ge)):h("v-if",!0),O(" "+x(e.formState===e.FormState.ReadyForInput?"Submit":"Submitting..."),1)],2)])])],8,ie))}var ye=I(K,[["render",fe]]);export{ye as default};
